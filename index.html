<html>
	<header>
		<!-- Compiled and minified CSS -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">

		<!-- Compiled and minified JavaScript -->
		<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
		<script>
			var message = new Object;		
			//var commObject = new Object();
			//commObject.channel = 'Preferences';
			//commObject.message = message;
			
			function SendUrl(){
				// Setting message object
				var url = new Object();				
				url.url = document.getElementById('urlToSend').value;
				message.id = 'Prefs';
				message.data = url;

				var txtMessage = JSON.stringify(message);
				console.log('Sending Preferences Url: ' + txtMessage);				
				window.top.postMessage([{channel: 'preferences', message: txtMessage}], '*');
			}
			
			function SendCloseUrl(){
				// Setting close message object
				var txtMessage = JSON.stringify(message);
				console.log('Sending Save');				
				window.top.postMessage([{channel: 'closeUsrPrefs', message: ''}], '*');
			}
			
			window.addEventListener("message", function (event) {
				console.log("Test Teslescope has recieved a message");
				console.log(event);
				Materialize.toast('Next is requesting a url for its user settings!!!', 4000);
				document.getElementById('placeholder').innerHTML = JSON.stringify(event.data[0]);
				}, false);
		</script>
	</header>

	
	<body>
		<br/><br/>
		<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
		<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
		<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>				
		 <div class="row">
			<div class="input-field col s3">
				<a class="waves-effect waves-light btn" onclick="SendUrl()">SendUrl</a>
			</div>
			<div class="input-field col s9">
				<input id="urlToSend" type="text" value="https://northplains.com"  placeholder="Url to send.." text="SendUrl">
			</div>
		</div>		
		<div class="row">
			<div class="input-field col s3">				
				<a class="waves-effect waves-light btn" onclick="SendCloseUrl()">Close modal</a>
			</div>
		</div>
		
	</body>
	<style>
		#toast-container {
			top: auto !important;
			right: auto !important;
			bottom: 10%;
			left:7%;
		}
	</style>
</html>
